{"ast":null,"code":"var _jsxFileName = \"/Users/deviambar/Documents/simpleapp/frontend/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport fetchJsonp from 'fetch-jsonp';\nimport { Action, withStatechart } from 'react-automata';\nimport 'normalize.css';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst statechart = {\n  initial: 'start',\n  states: {\n    start: {\n      on: {\n        SEARCH: 'loading'\n      }\n    },\n    loading: {\n      on: {\n        SEARCH_SUCCESS: 'gallery',\n        SEARCH_FAILURE: 'error',\n        CANCEL_SEARCH: 'gallery'\n      },\n      onEntry: 'enterLoading',\n      onExit: 'exitLoading'\n    },\n    error: {\n      on: {\n        SEARCH: 'loading'\n      },\n      onEntry: 'enterError'\n    },\n    gallery: {\n      on: {\n        SEARCH: 'loading',\n        SELECT_PHOTO: 'photo'\n      },\n      onEntry: 'enterGallery'\n    },\n    photo: {\n      on: {\n        EXIT_PHOTO: 'gallery'\n      },\n      onEntry: 'enterPhoto'\n    }\n  }\n};\n\nclass Gallery extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      disableForm: false,\n      query: '',\n      searchText: 'Search'\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.transition('SEARCH');\n    };\n\n    this.handleChangeQuery = e => {\n      this.setState({\n        query: e.target.value\n      });\n    };\n  }\n\n  enterLoading() {\n    this.setState({\n      disableForm: true,\n      searchText: 'Searching...'\n    });\n    const encodedQuery = encodeURIComponent(this.state.query);\n    setTimeout(() => {\n      fetchJsonp(`https://api.flickr.com/services/feeds/photos_public.gne?lang=en-us&format=json&tags=${encodedQuery}`, {\n        jsonpCallback: 'jsoncallback'\n      }).then(res => res.json()).then(_ref => {\n        let {\n          items\n        } = _ref;\n        return this.props.transition('SEARCH_SUCCESS', {\n          items\n        });\n      }).catch(() => this.props.transition('SEARCH_FAILURE'));\n    }, 1000);\n  }\n\n  exitLoading() {\n    this.setState({\n      disableForm: false,\n      searchText: 'Search'\n    });\n  }\n\n  enterError() {\n    this.setState({\n      searchText: 'Try search again'\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui-app\",\n      \"data-state\": this.props.machineState,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"ui-form\",\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"ui-input\",\n          disabled: this.state.disableForm,\n          placeholder: \"Search Flickr for photos...\",\n          type: \"search\",\n          value: this.state.query,\n          onChange: this.handleChangeQuery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            disabled: this.state.disableForm,\n            children: this.state.searchText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Action, {\n            show: \"enterLoading\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ui-button\",\n              type: \"button\",\n              onClick: () => this.props.transition('CANCEL_SEARCH'),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"ui-items\",\n        children: [/*#__PURE__*/_jsxDEV(Action, {\n          show: \"enterError\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ui-error\",\n            children: \"Uh oh, search failed.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), this.props.items.map((item, i) => /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"ui-item\",\n          src: item.media.m,\n          style: {\n            '--i': i\n          },\n          onClick: () => this.props.transition('SELECT_PHOTO', {\n            photo: item\n          })\n        }, item.link, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Action, {\n        show: \"enterPhoto\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"ui-photo-detail\",\n          onClick: () => this.props.transition('EXIT_PHOTO'),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"ui-photo\",\n            src: this.props.photo.media.m\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst initialData = {\n  items: [],\n  photo: {\n    media: {}\n  }\n};\nconst App = withStatechart(statechart, {\n  initialData\n})(Gallery);\n_c = App;\nReactDOM.render( /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 160,\n  columnNumber: 17\n}, this), document.getElementById('root'));\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","ReactDOM","fetchJsonp","Action","withStatechart","statechart","initial","states","start","on","SEARCH","loading","SEARCH_SUCCESS","SEARCH_FAILURE","CANCEL_SEARCH","onEntry","onExit","error","gallery","SELECT_PHOTO","photo","EXIT_PHOTO","Gallery","Component","state","disableForm","query","searchText","handleSubmit","e","preventDefault","props","transition","handleChangeQuery","setState","target","value","enterLoading","encodedQuery","encodeURIComponent","setTimeout","jsonpCallback","then","res","json","items","catch","exitLoading","enterError","render","machineState","map","item","i","media","m","link","initialData","App","document","getElementById"],"sources":["/Users/deviambar/Documents/simpleapp/frontend/src/index.js"],"sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport fetchJsonp from 'fetch-jsonp'\nimport { Action, withStatechart } from 'react-automata'\nimport 'normalize.css'\nimport './App.css'\n\nconst statechart = {\n  initial: 'start',\n  states: {\n    start: {\n      on: {\n        SEARCH: 'loading',\n      },\n    },\n    loading: {\n      on: {\n        SEARCH_SUCCESS: 'gallery',\n        SEARCH_FAILURE: 'error',\n        CANCEL_SEARCH: 'gallery',\n      },\n      onEntry: 'enterLoading',\n      onExit: 'exitLoading',\n    },\n    error: {\n      on: {\n        SEARCH: 'loading',\n      },\n      onEntry: 'enterError',\n    },\n    gallery: {\n      on: {\n        SEARCH: 'loading',\n        SELECT_PHOTO: 'photo',\n      },\n      onEntry: 'enterGallery',\n    },\n    photo: {\n      on: {\n        EXIT_PHOTO: 'gallery',\n      },\n      onEntry: 'enterPhoto',\n    },\n  },\n}\n\nclass Gallery extends React.Component {\n  state = {\n    disableForm: false,\n    query: '',\n    searchText: 'Search',\n  }\n\n  enterLoading() {\n    this.setState({\n      disableForm: true,\n      searchText: 'Searching...',\n    })\n\n    const encodedQuery = encodeURIComponent(this.state.query)\n    setTimeout(() => {\n      fetchJsonp(\n        `https://api.flickr.com/services/feeds/photos_public.gne?lang=en-us&format=json&tags=${encodedQuery}`,\n        { jsonpCallback: 'jsoncallback' }\n      )\n        .then(res => res.json())\n        .then(({ items }) => this.props.transition('SEARCH_SUCCESS', { items }))\n        .catch(() => this.props.transition('SEARCH_FAILURE'))\n    }, 1000)\n  }\n\n  exitLoading() {\n    this.setState({\n      disableForm: false,\n      searchText: 'Search',\n    })\n  }\n\n  enterError() {\n    this.setState({\n      searchText: 'Try search again',\n    })\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n    this.props.transition('SEARCH')\n  }\n\n  handleChangeQuery = e => {\n    this.setState({ query: e.target.value })\n  }\n\n  render() {\n    return (\n      <div className=\"ui-app\" data-state={this.props.machineState}>\n        <form className=\"ui-form\" onSubmit={this.handleSubmit}>\n          <input\n            className=\"ui-input\"\n            disabled={this.state.disableForm}\n            placeholder=\"Search Flickr for photos...\"\n            type=\"search\"\n            value={this.state.query}\n            onChange={this.handleChangeQuery}\n          />\n          <div className=\"ui-buttons\">\n            <button className=\"ui-button\" disabled={this.state.disableForm}>\n              {this.state.searchText}\n            </button>\n            <Action show=\"enterLoading\">\n              <button\n                className=\"ui-button\"\n                type=\"button\"\n                onClick={() => this.props.transition('CANCEL_SEARCH')}\n              >\n                Cancel\n              </button>\n            </Action>\n          </div>\n        </form>\n\n        <section className=\"ui-items\">\n          <Action show=\"enterError\">\n            <span className=\"ui-error\">Uh oh, search failed.</span>\n          </Action>\n          {this.props.items.map((item, i) => (\n            <img\n              className=\"ui-item\"\n              key={item.link}\n              src={item.media.m}\n              style={{ '--i': i }}\n              onClick={() =>\n                this.props.transition('SELECT_PHOTO', { photo: item })}\n            />\n          ))}\n        </section>\n\n        <Action show=\"enterPhoto\">\n          <section\n            className=\"ui-photo-detail\"\n            onClick={() => this.props.transition('EXIT_PHOTO')}\n          >\n            <img className=\"ui-photo\" src={this.props.photo.media.m} />\n          </section>\n        </Action>\n      </div>\n    )\n  }\n}\n\nconst initialData = {\n  items: [],\n  photo: {\n    media: {},\n  },\n}\n\nconst App = withStatechart(statechart, { initialData })(Gallery)\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
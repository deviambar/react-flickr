{"ast":null,"code":"import React from 'react';\nimport globToRegExp from 'glob-to-regexp';\nimport memoize from 'memoize-one';\nimport PropTypes from 'prop-types';\nimport TestRenderer from 'react-test-renderer';\nimport { getShortestPaths } from 'xstate/lib/graph';\nimport invariant from 'invariant';\nimport { Machine, State, StateNode } from 'xstate';\nvar Context = /*#__PURE__*/React.createContext();\nvar DEFAULT_CHANNEL = 'DEFAULT';\n\nvar getComponentName = function getComponentName(Component) {\n  return Component.displayName || Component.name || 'Component';\n};\n\nvar isStateless = function isStateless(Component) {\n  var _ref;\n\n  return !((_ref = Component) != null ? (_ref = _ref.prototype) != null ? _ref.isReactComponent : _ref : _ref);\n};\n\nvar stringify = function stringify(state) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof state === 'string') {\n    return path.concat(state).join('.');\n  }\n\n  return Object.keys(state).reduce(function (prev, key) {\n    return prev.concat(stringify(state[key], path.concat(key)));\n  }, []);\n};\n\nvar getPatterns = function getPatterns(glob) {\n  return Array.isArray(glob) ? glob.map(function (pattern) {\n    return globToRegExp(pattern);\n  }) : [globToRegExp(glob)];\n};\n\nvar matches = function matches(patterns, value) {\n  var values = Array.isArray(value) ? value : [value];\n  return patterns.some(function (pattern) {\n    return values.some(function (val) {\n      return pattern.test(val);\n    });\n  });\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar createConditional = function createConditional(displayName, contextField) {\n  var Conditional = function (_React$Component) {\n    inherits(Conditional, _React$Component);\n\n    function Conditional() {\n      var _temp, _this, _ret;\n\n      classCallCheck(this, Conditional);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getPatterns = memoize(getPatterns), _this.matches = memoize(matches), _temp), possibleConstructorReturn(_this, _ret);\n    }\n\n    Conditional.prototype.componentDidMount = function componentDidMount() {\n      if (this.isVisible && this.props.onShow) {\n        this.props.onShow();\n      }\n    };\n\n    Conditional.prototype.componentDidUpdate = function componentDidUpdate() {\n      if (!this.wasVisible && this.isVisible && this.props.onShow) {\n        this.props.onShow();\n      }\n\n      if (this.wasVisible && !this.isVisible && this.props.onHide) {\n        this.props.onHide();\n      }\n    };\n\n    Conditional.prototype.render = function render() {\n      this.wasVisible = this.isVisible;\n      var patterns = this.getPatterns(this.props.is);\n      this.isVisible = this.matches(patterns, this.props.value);\n\n      if (this.props.render) {\n        return this.props.render(this.isVisible);\n      }\n\n      return this.isVisible ? this.props.children : null;\n    };\n\n    return Conditional;\n  }(React.Component);\n\n  var Container = function Container(props) {\n    return React.createElement(Context.Consumer, null, function (context) {\n      var _ref;\n\n      return React.createElement(Conditional, _extends({}, props, {\n        value: (_ref = context) != null ? (_ref = _ref[props.channel || DEFAULT_CHANNEL]) != null ? _ref[contextField] : _ref : _ref\n      }));\n    });\n  };\n\n  Container.defaultProps = {\n    children: null\n  };\n  Container.displayName = displayName;\n  process.env.NODE_ENV !== \"production\" ? Container.propTypes = {\n    channel: PropTypes.string,\n    children: PropTypes.node,\n    is: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]).isRequired,\n    render: PropTypes.func,\n    onHide: PropTypes.func,\n    onShow: PropTypes.func\n  } : void 0;\n  return Container;\n};\n\nvar Action = /*#__PURE__*/createConditional('Action', 'actions');\nvar State$1 = /*#__PURE__*/createConditional('State', 'machineState');\n\nvar testStateMachine = function testStateMachine(Component) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var paths = getShortestPaths(Component.machine, options.extendedState);\n  Object.keys(paths).forEach(function (key) {\n    var _ref2;\n\n    var initialData = (_ref2 = options) != null ? (_ref2 = _ref2.fixtures) != null ? _ref2.initialData : _ref2 : _ref2;\n    var renderer = TestRenderer.create(React.createElement(Component, {\n      initialData: initialData\n    }));\n    var instance = renderer.getInstance();\n    paths[key].forEach(function (_ref3) {\n      var _ref;\n\n      var event = _ref3.event,\n          state = _ref3.state;\n      var fixtures = (_ref = options) != null ? (_ref = _ref.fixtures) != null ? (_ref = _ref[state]) != null ? _ref[event] : _ref : _ref : _ref;\n      instance.handleTransition(event, fixtures);\n    });\n    var machineState = instance.state.machineState.toString() || stringify(instance.state.machineState.value).join(',');\n    expect(renderer.toJSON()).toMatchSnapshot(machineState);\n  });\n};\n\nvar REDUX_DISPATCH = 'DISPATCH';\nvar REDUX_JUMP_TO_ACTION = 'JUMP_TO_ACTION';\nvar XSTATE_START_ACTION = 'xstate.start';\nvar XSTATE_STOP_ACTION = 'xstate.stop';\n\nvar withStateMachine = function withStateMachine(statechart) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (Component) {\n    var Automata = function (_React$Component) {\n      inherits(Automata, _React$Component);\n\n      function Automata() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, Automata);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n          componentState: _this.props.initialData,\n          machineState: _this.props.initialMachineState || _this.constructor.machine.initialState\n        }, _this.instance = React.createRef(), _this.ref = !isStateless(Component) ? _this.instance : null, _this.runAction = function (effect) {\n          switch (typeof effect === 'undefined' ? 'undefined' : _typeof(effect)) {\n            case 'string':\n              if (_this.instance.current[effect]) {\n                _this.instance.current[effect](_this.state.componentState, _this.lastEvent);\n              }\n\n              break;\n\n            case 'object':\n              if (effect.type === XSTATE_START_ACTION || effect.type === XSTATE_STOP_ACTION) {\n                if (_this.instance.current[effect.activity]) {\n                  _this.instance.current[effect.activity](effect.type === XSTATE_START_ACTION);\n                }\n              }\n\n              if (_this.instance.current[effect.type]) {\n                _this.instance.current[effect.type](_this.state.componentState, _this.lastEvent);\n              }\n\n              break;\n\n            case 'function':\n              effect(_this.state.componentState, _this.lastEvent);\n              break;\n          }\n        }, _this.stringify = memoize(stringify), _this.handleTransition = function (event, updater) {\n          var _ref;\n\n          invariant(!_this.isTransitioning, 'Cannot transition on \"%s\" in the middle of a transition on \"%s\".', event, _this.lastEvent);\n          _this.lastEvent = event;\n          _this.isTransitioning = true;\n\n          if ((_ref = _this) != null ? (_ref = _ref.instance) != null ? (_ref = _ref.current) != null ? _ref.componentWillTransition : _ref : _ref : _ref) {\n            _this.instance.current.componentWillTransition(event);\n          }\n\n          _this.setState(function (prevState) {\n            var stateChange = typeof updater === 'function' ? updater(prevState.componentState) : updater;\n\n            var machineState = _this.constructor.machine.transition(prevState.machineState, event, stateChange);\n\n            if (machineState.value === prevState.machineState.value && (!stateChange || stateChange === prevState.componentState)) {\n              _this.isTransitioning = false;\n              return null;\n            }\n\n            return {\n              componentState: stateChange ? _extends({}, prevState.componentState, stateChange) : prevState.componentState,\n              machineState: machineState\n            };\n          });\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      Automata.prototype.componentDidMount = function componentDidMount() {\n        var _this2 = this;\n\n        if (options.devTools && window.__REDUX_DEVTOOLS_EXTENSION__) {\n          this.devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({\n            name: getComponentName(Component)\n          });\n          this.devTools.init(this.state);\n          this.unsubscribe = this.devTools.subscribe(function (message) {\n            if (message.type === REDUX_DISPATCH && message.payload.type === REDUX_JUMP_TO_ACTION) {\n              _this2.jumpToAction = true;\n\n              _this2.setState(JSON.parse(message.state));\n            }\n          });\n        }\n\n        this.runActions();\n      };\n\n      Automata.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n        if (!this.jumpToAction) {\n          this.handleComponentDidUpdate(prevProps, prevState);\n        } else {\n          this.jumpToAction = false;\n        }\n      };\n\n      Automata.prototype.componentWillUnmount = function componentWillUnmount() {\n        if (this.unsubscribe) {\n          this.unsubscribe();\n        }\n\n        if (window.__REDUX_DEVTOOLS_EXTENSION__) {\n          window.__REDUX_DEVTOOLS_EXTENSION__.disconnect();\n        }\n      };\n\n      Automata.prototype.runActions = function runActions() {\n        var _ref3;\n\n        if ((_ref3 = this) != null ? (_ref3 = _ref3.instance) != null ? _ref3.current : _ref3 : _ref3) {\n          this.state.machineState.actions.forEach(this.runAction);\n        }\n      };\n\n      Automata.prototype.handleComponentDidUpdate = function handleComponentDidUpdate(prevProps, prevState) {\n        this.isTransitioning = false;\n\n        if (prevState.machineState !== this.state.machineState) {\n          var _ref2;\n\n          this.runActions();\n\n          if ((_ref2 = this) != null ? (_ref2 = _ref2.instance) != null ? (_ref2 = _ref2.current) != null ? _ref2.componentDidTransition : _ref2 : _ref2 : _ref2) {\n            this.instance.current.componentDidTransition(prevState.machineState, this.lastEvent);\n          }\n\n          if (this.devTools) {\n            this.devTools.send(this.lastEvent, this.state);\n          }\n        }\n      };\n\n      Automata.prototype.getContext = function getContext(context) {\n        var _babelHelpers$extends;\n\n        var channel = options.channel || DEFAULT_CHANNEL;\n        return _extends({}, context, (_babelHelpers$extends = {}, _babelHelpers$extends[channel] = {\n          actions: this.state.machineState.actions,\n          machineState: this.state.machineState.toString() || this.stringify(this.state.machineState.value)\n        }, _babelHelpers$extends));\n      };\n\n      Automata.prototype.render = function render() {\n        var _this3 = this;\n\n        return React.createElement(Context.Consumer, null, function (context) {\n          return React.createElement(Context.Provider, {\n            value: _this3.getContext(context)\n          }, React.createElement(Component, _extends({}, _this3.props, _this3.state.componentState, {\n            machineState: _this3.state.machineState,\n            ref: _this3.ref,\n            transition: _this3.handleTransition\n          })));\n        });\n      };\n\n      return Automata;\n    }(React.Component);\n\n    Automata.machine = statechart instanceof StateNode ? statechart : Machine(statechart);\n    process.env.NODE_ENV !== \"production\" ? Automata.propTypes = {\n      initialData: PropTypes.object,\n      initialMachineState: PropTypes.instanceOf(State)\n    } : void 0;\n    return Automata;\n  };\n};\n\nexport { Action, State$1 as State, testStateMachine, withStateMachine };","map":{"version":3,"names":["React","globToRegExp","memoize","PropTypes","TestRenderer","getShortestPaths","invariant","Machine","State","StateNode","Context","createContext","DEFAULT_CHANNEL","getComponentName","Component","displayName","name","isStateless","_ref","prototype","isReactComponent","stringify","state","path","arguments","length","undefined","concat","join","Object","keys","reduce","prev","key","getPatterns","glob","Array","isArray","map","pattern","matches","patterns","value","values","some","val","test","_typeof","Symbol","iterator","obj","constructor","classCallCheck","instance","Constructor","TypeError","_extends","assign","target","i","source","hasOwnProperty","call","inherits","subClass","superClass","create","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","createConditional","contextField","Conditional","_React$Component","_temp","_this","_ret","_len","args","_key","apply","componentDidMount","isVisible","props","onShow","componentDidUpdate","wasVisible","onHide","render","is","children","Container","createElement","Consumer","context","channel","defaultProps","process","env","NODE_ENV","propTypes","string","node","oneOfType","arrayOf","isRequired","func","Action","State$1","testStateMachine","options","paths","machine","extendedState","forEach","_ref2","initialData","fixtures","renderer","getInstance","_ref3","event","handleTransition","machineState","toString","expect","toJSON","toMatchSnapshot","REDUX_DISPATCH","REDUX_JUMP_TO_ACTION","XSTATE_START_ACTION","XSTATE_STOP_ACTION","withStateMachine","statechart","Automata","componentState","initialMachineState","initialState","createRef","ref","runAction","effect","current","lastEvent","type","activity","updater","isTransitioning","componentWillTransition","setState","prevState","stateChange","transition","_this2","devTools","window","__REDUX_DEVTOOLS_EXTENSION__","connect","init","unsubscribe","subscribe","message","payload","jumpToAction","JSON","parse","runActions","prevProps","handleComponentDidUpdate","componentWillUnmount","disconnect","actions","componentDidTransition","send","getContext","_babelHelpers$extends","_this3","Provider","object","instanceOf"],"sources":["/Users/deviambar/Documents/simpleapp/frontend/node_modules/react-automata/dist/react-automata.es.js"],"sourcesContent":["import React from 'react';\nimport globToRegExp from 'glob-to-regexp';\nimport memoize from 'memoize-one';\nimport PropTypes from 'prop-types';\nimport TestRenderer from 'react-test-renderer';\nimport { getShortestPaths } from 'xstate/lib/graph';\nimport invariant from 'invariant';\nimport { Machine, State, StateNode } from 'xstate';\n\nvar Context = /*#__PURE__*/React.createContext();\n\nvar DEFAULT_CHANNEL = 'DEFAULT';\n\nvar getComponentName = function getComponentName(Component) {\n  return Component.displayName || Component.name || 'Component';\n};\n\nvar isStateless = function isStateless(Component) {\n  var _ref;\n\n  return !((_ref = Component) != null ? (_ref = _ref.prototype) != null ? _ref.isReactComponent : _ref : _ref);\n};\n\nvar stringify = function stringify(state) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof state === 'string') {\n    return path.concat(state).join('.');\n  }\n\n  return Object.keys(state).reduce(function (prev, key) {\n    return prev.concat(stringify(state[key], path.concat(key)));\n  }, []);\n};\n\nvar getPatterns = function getPatterns(glob) {\n  return Array.isArray(glob) ? glob.map(function (pattern) {\n    return globToRegExp(pattern);\n  }) : [globToRegExp(glob)];\n};\n\nvar matches = function matches(patterns, value) {\n  var values = Array.isArray(value) ? value : [value];\n\n  return patterns.some(function (pattern) {\n    return values.some(function (val) {\n      return pattern.test(val);\n    });\n  });\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar createConditional = function createConditional(displayName, contextField) {\n  var Conditional = function (_React$Component) {\n    inherits(Conditional, _React$Component);\n\n    function Conditional() {\n      var _temp, _this, _ret;\n\n      classCallCheck(this, Conditional);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getPatterns = memoize(getPatterns), _this.matches = memoize(matches), _temp), possibleConstructorReturn(_this, _ret);\n    }\n\n    Conditional.prototype.componentDidMount = function componentDidMount() {\n      if (this.isVisible && this.props.onShow) {\n        this.props.onShow();\n      }\n    };\n\n    Conditional.prototype.componentDidUpdate = function componentDidUpdate() {\n      if (!this.wasVisible && this.isVisible && this.props.onShow) {\n        this.props.onShow();\n      }\n\n      if (this.wasVisible && !this.isVisible && this.props.onHide) {\n        this.props.onHide();\n      }\n    };\n\n    Conditional.prototype.render = function render() {\n      this.wasVisible = this.isVisible;\n      var patterns = this.getPatterns(this.props.is);\n      this.isVisible = this.matches(patterns, this.props.value);\n\n      if (this.props.render) {\n        return this.props.render(this.isVisible);\n      }\n\n      return this.isVisible ? this.props.children : null;\n    };\n\n    return Conditional;\n  }(React.Component);\n\n  var Container = function Container(props) {\n    return React.createElement(\n      Context.Consumer,\n      null,\n      function (context) {\n        var _ref;\n\n        return React.createElement(Conditional, _extends({}, props, {\n          value: (_ref = context) != null ? (_ref = _ref[props.channel || DEFAULT_CHANNEL]) != null ? _ref[contextField] : _ref : _ref\n        }));\n      }\n    );\n  };\n\n  Container.defaultProps = {\n    children: null\n  };\n\n  Container.displayName = displayName;\n\n  process.env.NODE_ENV !== \"production\" ? Container.propTypes = {\n    channel: PropTypes.string,\n    children: PropTypes.node,\n    is: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]).isRequired,\n    render: PropTypes.func,\n    onHide: PropTypes.func,\n    onShow: PropTypes.func\n  } : void 0;\n\n  return Container;\n};\n\nvar Action = /*#__PURE__*/createConditional('Action', 'actions');\n\nvar State$1 = /*#__PURE__*/createConditional('State', 'machineState');\n\nvar testStateMachine = function testStateMachine(Component) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var paths = getShortestPaths(Component.machine, options.extendedState);\n\n  Object.keys(paths).forEach(function (key) {\n    var _ref2;\n\n    var initialData = (_ref2 = options) != null ? (_ref2 = _ref2.fixtures) != null ? _ref2.initialData : _ref2 : _ref2;\n    var renderer = TestRenderer.create(React.createElement(Component, { initialData: initialData }));\n    var instance = renderer.getInstance();\n\n    paths[key].forEach(function (_ref3) {\n      var _ref;\n\n      var event = _ref3.event,\n          state = _ref3.state;\n\n      var fixtures = (_ref = options) != null ? (_ref = _ref.fixtures) != null ? (_ref = _ref[state]) != null ? _ref[event] : _ref : _ref : _ref;\n\n      instance.handleTransition(event, fixtures);\n    });\n\n    var machineState = instance.state.machineState.toString() || stringify(instance.state.machineState.value).join(',');\n\n    expect(renderer.toJSON()).toMatchSnapshot(machineState);\n  });\n};\n\nvar REDUX_DISPATCH = 'DISPATCH';\nvar REDUX_JUMP_TO_ACTION = 'JUMP_TO_ACTION';\nvar XSTATE_START_ACTION = 'xstate.start';\nvar XSTATE_STOP_ACTION = 'xstate.stop';\n\nvar withStateMachine = function withStateMachine(statechart) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (Component) {\n    var Automata = function (_React$Component) {\n      inherits(Automata, _React$Component);\n\n      function Automata() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, Automata);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.state = {\n          componentState: _this.props.initialData,\n          machineState: _this.props.initialMachineState || _this.constructor.machine.initialState\n        }, _this.instance = React.createRef(), _this.ref = !isStateless(Component) ? _this.instance : null, _this.runAction = function (effect) {\n          switch (typeof effect === 'undefined' ? 'undefined' : _typeof(effect)) {\n            case 'string':\n              if (_this.instance.current[effect]) {\n                _this.instance.current[effect](_this.state.componentState, _this.lastEvent);\n              }\n              break;\n            case 'object':\n              if (effect.type === XSTATE_START_ACTION || effect.type === XSTATE_STOP_ACTION) {\n                if (_this.instance.current[effect.activity]) {\n                  _this.instance.current[effect.activity](effect.type === XSTATE_START_ACTION);\n                }\n              }\n              if (_this.instance.current[effect.type]) {\n                _this.instance.current[effect.type](_this.state.componentState, _this.lastEvent);\n              }\n              break;\n            case 'function':\n              effect(_this.state.componentState, _this.lastEvent);\n              break;\n          }\n        }, _this.stringify = memoize(stringify), _this.handleTransition = function (event, updater) {\n          var _ref;\n\n          invariant(!_this.isTransitioning, 'Cannot transition on \"%s\" in the middle of a transition on \"%s\".', event, _this.lastEvent);\n\n          _this.lastEvent = event;\n          _this.isTransitioning = true;\n\n          if ((_ref = _this) != null ? (_ref = _ref.instance) != null ? (_ref = _ref.current) != null ? _ref.componentWillTransition : _ref : _ref : _ref) {\n            _this.instance.current.componentWillTransition(event);\n          }\n\n          _this.setState(function (prevState) {\n            var stateChange = typeof updater === 'function' ? updater(prevState.componentState) : updater;\n            var machineState = _this.constructor.machine.transition(prevState.machineState, event, stateChange);\n\n            if (machineState.value === prevState.machineState.value && (!stateChange || stateChange === prevState.componentState)) {\n              _this.isTransitioning = false;\n\n              return null;\n            }\n\n            return {\n              componentState: stateChange ? _extends({}, prevState.componentState, stateChange) : prevState.componentState,\n              machineState: machineState\n            };\n          });\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      Automata.prototype.componentDidMount = function componentDidMount() {\n        var _this2 = this;\n\n        if (options.devTools && window.__REDUX_DEVTOOLS_EXTENSION__) {\n          this.devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({\n            name: getComponentName(Component)\n          });\n          this.devTools.init(this.state);\n\n          this.unsubscribe = this.devTools.subscribe(function (message) {\n            if (message.type === REDUX_DISPATCH && message.payload.type === REDUX_JUMP_TO_ACTION) {\n              _this2.jumpToAction = true;\n              _this2.setState(JSON.parse(message.state));\n            }\n          });\n        }\n\n        this.runActions();\n      };\n\n      Automata.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n        if (!this.jumpToAction) {\n          this.handleComponentDidUpdate(prevProps, prevState);\n        } else {\n          this.jumpToAction = false;\n        }\n      };\n\n      Automata.prototype.componentWillUnmount = function componentWillUnmount() {\n        if (this.unsubscribe) {\n          this.unsubscribe();\n        }\n\n        if (window.__REDUX_DEVTOOLS_EXTENSION__) {\n          window.__REDUX_DEVTOOLS_EXTENSION__.disconnect();\n        }\n      };\n\n      Automata.prototype.runActions = function runActions() {\n        var _ref3;\n\n        if ((_ref3 = this) != null ? (_ref3 = _ref3.instance) != null ? _ref3.current : _ref3 : _ref3) {\n          this.state.machineState.actions.forEach(this.runAction);\n        }\n      };\n\n      Automata.prototype.handleComponentDidUpdate = function handleComponentDidUpdate(prevProps, prevState) {\n        this.isTransitioning = false;\n\n        if (prevState.machineState !== this.state.machineState) {\n          var _ref2;\n\n          this.runActions();\n\n          if ((_ref2 = this) != null ? (_ref2 = _ref2.instance) != null ? (_ref2 = _ref2.current) != null ? _ref2.componentDidTransition : _ref2 : _ref2 : _ref2) {\n            this.instance.current.componentDidTransition(prevState.machineState, this.lastEvent);\n          }\n\n          if (this.devTools) {\n            this.devTools.send(this.lastEvent, this.state);\n          }\n        }\n      };\n\n      Automata.prototype.getContext = function getContext(context) {\n        var _babelHelpers$extends;\n\n        var channel = options.channel || DEFAULT_CHANNEL;\n\n        return _extends({}, context, (_babelHelpers$extends = {}, _babelHelpers$extends[channel] = {\n          actions: this.state.machineState.actions,\n          machineState: this.state.machineState.toString() || this.stringify(this.state.machineState.value)\n        }, _babelHelpers$extends));\n      };\n\n      Automata.prototype.render = function render() {\n        var _this3 = this;\n\n        return React.createElement(\n          Context.Consumer,\n          null,\n          function (context) {\n            return React.createElement(\n              Context.Provider,\n              { value: _this3.getContext(context) },\n              React.createElement(Component, _extends({}, _this3.props, _this3.state.componentState, {\n                machineState: _this3.state.machineState,\n                ref: _this3.ref,\n                transition: _this3.handleTransition\n              }))\n            );\n          }\n        );\n      };\n\n      return Automata;\n    }(React.Component);\n\n    Automata.machine = statechart instanceof StateNode ? statechart : Machine(statechart);\n    process.env.NODE_ENV !== \"production\" ? Automata.propTypes = {\n      initialData: PropTypes.object,\n      initialMachineState: PropTypes.instanceOf(State)\n    } : void 0;\n\n\n    return Automata;\n  };\n};\n\nexport { Action, State$1 as State, testStateMachine, withStateMachine };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}